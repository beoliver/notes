# Part 2

## Creating an Application

Now that we know how to start a REPL we can create a program.

```sh
.
├── jars
│   ├── clojure-1.11.3.jar
│   ├── core.specs.alpha-0.2.62.jar
│   └── spec.alpha-0.3.218.jar
└── src
    └── example
        ├── core.clj
        └── thing.clj

```
Where the file "/src/example/thing.clj" has the following content:

```clojure
(ns example.thing)

(println "This is a side effect in 'example.thing'")

(defn greet [name]
  (println (format "Hello, %s." name)))
```

And the file "/src/example/core.clj" has the following content:

```clojure
(ns example.core
  (:require [example.thing :as thing])
  (:gen-class))

(println "This is a side effect in 'example.core'")

(defn -main [& args]
  (thing/greet "You"))
```

Note the `(:gen-class)` in the namespace definition. 
Note the `-main` function. The `-` prefix.


```clojure
user=> (compile 'example.core)
Unexpected error (IOException) macroexpanding clojure.core/gen-class at (example/core.clj:1:1).
No such file or directory
user=> *compile-path*
"classes"
```

```bash 
$ mkdir classes
$ java -cp "jars/*:src:classes" clojure.main
```

```clojure
Clojure 1.11.1
user=> (compile 'example.core)
This is another side effect
example.core
^D
```

```bash
$ tree classes
classes
├── clojure
│   └── core
│       └── specs
│           ├── alpha$even_number_of_forms_QMARK_.class
│           ├── ...
│           └── alpha__init.class
└── example
    ├── core$_main.class
    ├── core$fn__133.class
    ├── core$loading__6789__auto____126.class
    ├── core.class
    ├── core__init.class
    ├── thing$fn__130.class
    ├── thing$greet.class
    ├── thing$loading__6789__auto____128.class
    └── thing__init.class
```

## Create an Uberjar

By creating an uberjar, it is possible to ship a single jar file.


```bash
echo "Manifest-Version: 1.0\nMain-Class: example.core" > manifest.txt
mkdir -p temp
cd temp
for jar in ../jars/*.jar; do
    jar xf "$jar"
done
cd ..
jar cfm example-uberjar.jar manifest.txt -C classes/ . -C temp/ .
```

We can now run the resulting artifact 

```bash 
$ java -jar example-uberjar.jar
```

which results in the following output

```
This is a side effect in 'example.thing'
This is a side effect in 'example.core'
Hello, You.
```

